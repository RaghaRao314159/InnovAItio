<!DOCTYPE html>
<html>
<head>
<title>Me</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<style>
    .box {
        float: "left";
        border-radius: 20px;
        border: 1px solid black;
        padding: 10px;
        margin: 30px, 0px;
        background-color: blanchedalmond;
    }

    .bottom-button {
            position: fixed;
            bottom: 20px; /* You can adjust this value to change the distance from the bottom */
            left: 20px; /* You can adjust this value to change the distance from the right */
        }
    .send-button {
        position: fixed;
        bottom: 20px; /* You can adjust this value to change the distance from the bottom */
        right: 20px;  /*You can adjust this value to change the distance from the right */
    }
</style>
</head>
<body>
    <div style="width:100%;"> <!-- Main Div -->
        <div style="float:left; width:50%;">
            <span>{{friend}}</span>
            {% for box in friend_convo %}
                <br><br><Box class="box">{{ box }}</Box> <br><br>
            {% endfor %}

        </div>
        <div style="float:right;">
            <span>Me</span>
            {% for box in me_convo %}
                <br><br><Box class="box">{{ box }}</Box> <br><br>
            {% endfor %}

        </div>
    <div>
    <br><br>

    <form class="bottom-button" action="/me" method="GET"> 
        <input type="submit" name = "receive" value="Receive">
    </form>

    <br><br>
    
    <form class="send-button" action="/me" enctype="multipart/form-data" method="POST">
        <label for="me_message">Message: </label>
        <input type="text" name="me_message" autocomplete="off"> 
        <input type="submit" value="Send">
    </form>
    <script>
        // Assuming you have set a value in localStorage
        const myValue = localStorage.getItem("{{friend}}");

        // Send the value to Flask server using AJAX (jQuery example)
        $.ajax({
            url: '/me',
            type: 'POST',
            data: { 'value': myValue },
            success: function(response) {
                console.log('Data sent successfully!');
            },
            error: function(error) {
                console.error('Error sending data:', error);
            }
        });
    </script> 

    <button id="playButton">Hear recent message</button>

    <audio id="audioPlayer" controls style="display: none;">
        <source src="{{ url_for('serve_audio') }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <script>
        // Get references to the button and audio element
        const playButton = document.getElementById('playButton');
        const audioPlayer = document.getElementById('audioPlayer');
    
        // Add a click event listener to the button
        playButton.addEventListener('click', function() {
          // Toggle the display property of the audio element when the button is clicked
          if (audioPlayer.style.display === 'none') {
            audioPlayer.style.display = 'block';
          } else {
            audioPlayer.style.display = 'none';
          }
        });
    </script>

    
        
</body>
</html>